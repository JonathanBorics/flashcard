module.exports = [
"[externals]/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-route-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/compiled/@opentelemetry/api [external] (next/dist/compiled/@opentelemetry/api, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/@opentelemetry/api", () => require("next/dist/compiled/@opentelemetry/api"));

module.exports = mod;
}),
"[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/shared/lib/no-fallback-error.external.js [external] (next/dist/shared/lib/no-fallback-error.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/shared/lib/no-fallback-error.external.js", () => require("next/dist/shared/lib/no-fallback-error.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/after-task-async-storage.external.js [external] (next/dist/server/app-render/after-task-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/after-task-async-storage.external.js", () => require("next/dist/server/app-render/after-task-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/path [external] (path, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("path", () => require("path"));

module.exports = mod;
}),
"[externals]/fs [external] (fs, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("fs", () => require("fs"));

module.exports = mod;
}),
"[externals]/stream [external] (stream, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("stream", () => require("stream"));

module.exports = mod;
}),
"[externals]/http [external] (http, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("http", () => require("http"));

module.exports = mod;
}),
"[externals]/url [external] (url, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("url", () => require("url"));

module.exports = mod;
}),
"[externals]/punycode [external] (punycode, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("punycode", () => require("punycode"));

module.exports = mod;
}),
"[externals]/https [external] (https, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("https", () => require("https"));

module.exports = mod;
}),
"[externals]/zlib [external] (zlib, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("zlib", () => require("zlib"));

module.exports = mod;
}),
"[externals]/util [external] (util, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("util", () => require("util"));

module.exports = mod;
}),
"[externals]/net [external] (net, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("net", () => require("net"));

module.exports = mod;
}),
"[externals]/tls [external] (tls, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("tls", () => require("tls"));

module.exports = mod;
}),
"[externals]/tty [external] (tty, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("tty", () => require("tty"));

module.exports = mod;
}),
"[externals]/os [external] (os, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("os", () => require("os"));

module.exports = mod;
}),
"[externals]/events [external] (events, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("events", () => require("events"));

module.exports = mod;
}),
"[project]/app/api/translate/route.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "GET",
    ()=>GET,
    "dynamic",
    ()=>dynamic
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/server.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/path [external] (path, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/fs [external] (fs, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$vitalets$2f$google$2d$translate$2d$api$2f$dist$2f$esm$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@vitalets/google-translate-api/dist/esm/index.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$proxy$2d$agent$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/http-proxy-agent/dist/index.js [app-route] (ecmascript)");
;
;
;
;
;
const dynamic = 'force-dynamic';
// =================================================================
// Szolg√°ltat√≥i F√ºggv√©nyek
// =================================================================
// 1. SZOLG√ÅLTAT√ì: Helyi Mini-Sz√≥t√°r
let miniDictionary = null;
async function getFromLocalDictionary(word) {
    try {
        if (miniDictionary === null) {
            const jsonPath = __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].join(process.cwd(), 'public', 'data', 'mini_dictionary.json');
            const jsonData = await __TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__["promises"].readFile(jsonPath, 'utf-8');
            miniDictionary = JSON.parse(jsonData);
        }
        const result = miniDictionary[word.toLowerCase()];
        return result || [];
    } catch (error) {
        console.error(`‚ùå Hiba a helyi sz√≥t√°r olvas√°sakor: ${error.message}`);
        miniDictionary = {};
        return [];
    }
}
// 2. SZOLG√ÅLTAT√ì: Google Translate Proxy Rot√°torral
const proxies = (process.env.PROXY_LIST || '').split(',').filter(Boolean);
async function getGoogleTranslateWithProxy(word) {
    if (proxies.length === 0) {
        console.warn('‚ö†Ô∏è Nincs proxy be√°ll√≠tva a PROXY_LIST v√°ltoz√≥ban. A h√≠v√°s proxy n√©lk√ºl t√∂rt√©nik.');
    }
    // Pr√≥b√°lkozzunk maximum 3 k√ºl√∂nb√∂z≈ë proxyval, ha hiba t√∂rt√©nik
    const maxRetries = Math.min(proxies.length, 3) || 1;
    for(let attempt = 0; attempt < maxRetries; attempt++){
        try {
            let agent;
            if (proxies.length > 0) {
                const randomProxy = proxies[Math.floor(Math.random() * proxies.length)];
                console.log(`üì° Pr√≥b√°lkoz√°s a k√∂vetkez≈ë proxyval: ${randomProxy.split('@')[1]}`); // Ne logoljuk a jelsz√≥t!
                agent = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$proxy$2d$agent$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["HttpProxyAgent"](randomProxy);
            }
            const { text } = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$vitalets$2f$google$2d$translate$2d$api$2f$dist$2f$esm$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["translate"])(word, {
                to: 'hu',
                fetchOptions: {
                    agent
                }
            });
            return text.split(',').map((m)=>m.trim().toLowerCase()).filter(Boolean);
        } catch (e) {
            console.warn(`‚ö†Ô∏è Google Translate hiba a(z) ${attempt + 1}. pr√≥b√°lkoz√°sn√°l: ${e.message}`);
            if (e.name !== 'TooManyRequestsError' && attempt === maxRetries - 1) {
                // Ha nem rate limit hiba, √©s ez az utols√≥ pr√≥b√°lkoz√°s, akkor adjuk fel
                return [];
            }
        // Ha rate limit hiba, vagy van m√©g pr√≥b√°lkoz√°s, a ciklus folytat√≥dik egy √∫j proxyval
        }
    }
    // Ha minden pr√≥b√°lkoz√°s sikertelen volt
    return [];
}
// 3. SZOLG√ÅLTAT√ì: Dictionary (V√©gs≈ë tartal√©k)
async function getDictionaryDefinitions(word) {
    try {
        const response = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${encodeURIComponent(word)}`);
        if (!response.ok) return [];
        const data = await response.json();
        const definition = data[0]?.meanings?.[0]?.definitions?.[0]?.definition;
        return definition ? [
            `(def.) ${definition}`
        ] : [];
    } catch (error) {
        console.warn(`‚ö†Ô∏è Dictionary API hiba: ${error.message}`);
        return [];
    }
}
async function GET(request) {
    const { searchParams } = new URL(request.url);
    const word = searchParams.get('word');
    if (!word) {
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            error: 'A "word" param√©ter k√∂telez≈ë.'
        }, {
            status: 400
        });
    }
    let finalMeanings = [];
    // 1. L√âP√âS: Helyi sz√≥t√°r
    const localResults = await getFromLocalDictionary(word);
    if (localResults.length > 0) {
        finalMeanings.push(...localResults);
    }
    // 2. L√âP√âS: Google Translate Proxy-val
    if (finalMeanings.length === 0) {
        const googleResults = await getGoogleTranslateWithProxy(word);
        if (googleResults.length > 0) {
            finalMeanings.push(...googleResults);
        }
    }
    // 3. L√âP√âS: V√©gs≈ë tartal√©k
    if (finalMeanings.length === 0) {
        const definitions = await getDictionaryDefinitions(word);
        finalMeanings.push(...definitions);
    }
    if (finalMeanings.length === 0) {
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            translation: [
                "Nincs el√©rhet≈ë ford√≠t√°s"
            ]
        });
    }
    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
        translation: finalMeanings
    });
}
}),
];

//# sourceMappingURL=%5Broot-of-the-server%5D__0d1a9c1d._.js.map