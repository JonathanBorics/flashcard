{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jonathan/Desktop/flashcard/app/api/translate/route.js"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\n\r\nexport const dynamic = \"force-dynamic\";\r\n\r\n// RapidAPI Free Google Translator\r\nasync function translateWithRapidAPI(word) {\r\n  const apiKey = process.env.RAPIDAPI_KEY;\r\n\r\n  if (!apiKey) {\r\n    console.error(\"‚ùå RAPIDAPI_KEY nincs be√°ll√≠tva a .env.local f√°jlban!\");\r\n    return [];\r\n  }\r\n\r\n  try {\r\n    const response = await fetch(\r\n      \"https://free-google-translator.p.rapidapi.com/external-api/free-google-translator\",\r\n      {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"x-rapidapi-host\": \"free-google-translator.p.rapidapi.com\",\r\n          \"x-rapidapi-key\": apiKey,\r\n        },\r\n        body: JSON.stringify({\r\n          from: \"en\",\r\n          to: \"hu\",\r\n          query: word,\r\n        }),\r\n      }\r\n    );\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      throw new Error(`Status: ${response.status}, Body: ${errorText}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n    console.log(\"üì¶ RapidAPI v√°lasz:\", data);\r\n\r\n    // A v√°lasz lehet string vagy object\r\n    let translation;\r\n    if (typeof data.translation === \"string\") {\r\n      translation = data.translation;\r\n    } else if (data.translate) {\r\n      translation = data.translate;\r\n    } else if (typeof data === \"string\") {\r\n      translation = data;\r\n    }\r\n\r\n    if (translation) {\r\n      return [translation.toLowerCase()];\r\n    }\r\n\r\n    return [];\r\n  } catch (error) {\r\n    console.error(\"‚ùå RapidAPI hiba:\", error.message);\r\n    return [];\r\n  }\r\n}\r\n\r\n// Fallback: Dictionary API (angol defin√≠ci√≥k)\r\nasync function getDictionaryDefinitions(word) {\r\n  try {\r\n    const response = await fetch(\r\n      `https://api.dictionaryapi.dev/api/v2/entries/en/${encodeURIComponent(\r\n        word\r\n      )}`\r\n    );\r\n    if (!response.ok) return [];\r\n\r\n    const data = await response.json();\r\n    const definition = data[0]?.meanings?.[0]?.definitions?.[0]?.definition;\r\n\r\n    return definition ? [`(def.) ${definition}`] : [];\r\n  } catch (error) {\r\n    console.warn(\"‚ö†Ô∏è Dictionary API hiba:\", error.message);\r\n    return [];\r\n  }\r\n}\r\n\r\n// F≈ë API endpoint\r\nexport async function GET(request) {\r\n  const { searchParams } = new URL(request.url);\r\n  const word = searchParams.get(\"word\");\r\n\r\n  if (!word) {\r\n    return NextResponse.json(\r\n      { error: 'A \"word\" param√©ter k√∂telez≈ë.' },\r\n      { status: 400 }\r\n    );\r\n  }\r\n\r\n  console.log(\"üîç Ford√≠t√°s k√©r√©s:\", word);\r\n\r\n  // 1. RapidAPI ford√≠t√°s\r\n  const rapidTranslation = await translateWithRapidAPI(word);\r\n\r\n  if (rapidTranslation.length > 0) {\r\n    console.log(\"‚úÖ Sikeres RapidAPI ford√≠t√°s:\", rapidTranslation);\r\n    return NextResponse.json({ translation: rapidTranslation });\r\n  }\r\n\r\n  // 2. Fallback: Angol defin√≠ci√≥\r\n  console.log(\"‚ö†Ô∏è RapidAPI nem m≈±k√∂d√∂tt, angol defin√≠ci√≥...\");\r\n  const definitions = await getDictionaryDefinitions(word);\r\n\r\n  if (definitions.length > 0) {\r\n    return NextResponse.json({ translation: definitions });\r\n  }\r\n\r\n  // 3. V√©gs≈ë fallback\r\n  return NextResponse.json({ translation: [\"Nincs el√©rhet≈ë ford√≠t√°s\"] });\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAEO,MAAM,UAAU;AAEvB,kCAAkC;AAClC,eAAe,sBAAsB,IAAI;IACvC,MAAM,SAAS,QAAQ,GAAG,CAAC,YAAY;IAEvC,IAAI,CAAC,QAAQ;QACX,QAAQ,KAAK,CAAC;QACd,OAAO,EAAE;IACX;IAEA,IAAI;QACF,MAAM,WAAW,MAAM,MACrB,qFACA;YACE,QAAQ;YACR,SAAS;gBACP,gBAAgB;gBAChB,mBAAmB;gBACnB,kBAAkB;YACpB;YACA,MAAM,KAAK,SAAS,CAAC;gBACnB,MAAM;gBACN,IAAI;gBACJ,OAAO;YACT;QACF;QAGF,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,YAAY,MAAM,SAAS,IAAI;YACrC,MAAM,IAAI,MAAM,CAAC,QAAQ,EAAE,SAAS,MAAM,CAAC,QAAQ,EAAE,WAAW;QAClE;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,QAAQ,GAAG,CAAC,uBAAuB;QAEnC,oCAAoC;QACpC,IAAI;QACJ,IAAI,OAAO,KAAK,WAAW,KAAK,UAAU;YACxC,cAAc,KAAK,WAAW;QAChC,OAAO,IAAI,KAAK,SAAS,EAAE;YACzB,cAAc,KAAK,SAAS;QAC9B,OAAO,IAAI,OAAO,SAAS,UAAU;YACnC,cAAc;QAChB;QAEA,IAAI,aAAa;YACf,OAAO;gBAAC,YAAY,WAAW;aAAG;QACpC;QAEA,OAAO,EAAE;IACX,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,oBAAoB,MAAM,OAAO;QAC/C,OAAO,EAAE;IACX;AACF;AAEA,8CAA8C;AAC9C,eAAe,yBAAyB,IAAI;IAC1C,IAAI;QACF,MAAM,WAAW,MAAM,MACrB,CAAC,gDAAgD,EAAE,mBACjD,OACC;QAEL,IAAI,CAAC,SAAS,EAAE,EAAE,OAAO,EAAE;QAE3B,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,MAAM,aAAa,IAAI,CAAC,EAAE,EAAE,UAAU,CAAC,EAAE,EAAE,aAAa,CAAC,EAAE,EAAE;QAE7D,OAAO,aAAa;YAAC,CAAC,OAAO,EAAE,YAAY;SAAC,GAAG,EAAE;IACnD,EAAE,OAAO,OAAO;QACd,QAAQ,IAAI,CAAC,2BAA2B,MAAM,OAAO;QACrD,OAAO,EAAE;IACX;AACF;AAGO,eAAe,IAAI,OAAO;IAC/B,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;IAC5C,MAAM,OAAO,aAAa,GAAG,CAAC;IAE9B,IAAI,CAAC,MAAM;QACT,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA+B,GACxC;YAAE,QAAQ;QAAI;IAElB;IAEA,QAAQ,GAAG,CAAC,sBAAsB;IAElC,uBAAuB;IACvB,MAAM,mBAAmB,MAAM,sBAAsB;IAErD,IAAI,iBAAiB,MAAM,GAAG,GAAG;QAC/B,QAAQ,GAAG,CAAC,gCAAgC;QAC5C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,aAAa;QAAiB;IAC3D;IAEA,+BAA+B;IAC/B,QAAQ,GAAG,CAAC;IACZ,MAAM,cAAc,MAAM,yBAAyB;IAEnD,IAAI,YAAY,MAAM,GAAG,GAAG;QAC1B,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,aAAa;QAAY;IACtD;IAEA,oBAAoB;IACpB,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE,aAAa;YAAC;SAA0B;IAAC;AACtE","debugId":null}}]
}